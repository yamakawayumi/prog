<!DOCTYPE html>
<html lang="en">
<head>
<!--<meta charset="UTF-8">-->
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Map:Geolocation</title>
<style>html,body{height:100%;}body{padding:0;margin:0;}h1{padding:0;margin:0;font-size:50%;}</style>
</head>
<body>


<!-- MAP[START] -->
<h1>Map:Geolocation</h1>
<div id="myMap" style='width:60%;height:70%;float:left;'></div>
<!-- MAP[END] -->



<!-- MAP[START] -->
<h1>Click on the pin. (Select 1 to 3 as the second argument of the function. The result changes.)</h1>
<!--<div id="myMap" style="width:100vw;height:100vh;"></div>-->

<script src='https://www.bing.com/api/maps/mapcontrol?callback=GetMap&key=Ai8bHfzmLlI91H53Zvfy2UIvFaog3WwWNjsCNvUQg7vjwRqxkQACr1xZnfTmpoRQ' async defer></script>
<script src="../js/BmapQuery.js"></script>
<script>
//****************************************************************************************
// BingMaps&BmapQuery
//****************************************************************************************
//Init
function GetMap(){
    //------------------------------------------------------------------------
    //1. Instance
    //------------------------------------------------------------------------
    const map = new Bmap("#myMap");

    //------------------------------------------------------------------------
    //2. geolocation: Display Map
    //   map.geolocation(function(data:object){...});
    //------------------------------------------------------------------------
    map.geolocation(function(data) {
        //location
        const lat = data.coords.latitude;
        const lon = data.coords.longitude;
        //Map
        map.startMap(lat, lon, "load", 2);//4番目は地図の拡大縮小
        //pin
        map.pin(lat,lon,"#ff0000");
        const options = [];
        options[0]={
            "lat":35.762342,//緯度
            "lon":139.969055,//経度
            "title":"大慶園（ゲームセンター）",
            "pinColor":"#ff0000",
            "height":300,
            "width":320,
            "description": 'Byoudouin<br><img src="../img/da.jpg" width="300">',
            "show":false
        };
        options[1]={
            "lat":35.40573,
            "lon":140.053316 ,
            "title":"東京ドイツ村",
            "pinColor":"#ff0000",
            "height":300,
            "width":320,
            "description": 'Kinkakuji<br><img src="../img/t.jpg" width="300">',
            "show":false
        };
        options[2]={
            "lat":35.026852,
            "lon":140.061497,
            "title":"アンデルセン公園",
            "pinColor":"#ff0000",
            "height":300,
            "width":320,
            "description": 'Ginkakuji<br><img src="../img/a.jpg" width="300">',
            "show":false
        };
        options[3]={
            "lat":35.639897,
            "lon":139.862174,
            "title":"葛西臨海水族園",
            "pinColor":"",
            "height":300,
            "width":320,
            "description": 'Ginkakuji<br><img src="../img/ka.jpg" width="300">',
            "show":false
        };
        options[4]={
            "lat":35.632896,
            "lon":139.880394,
            "title":"ディズニーランド",
            "pinColor":"",
            "height":300,
            "width":320,
            "description": 'Ginkakuji<br><img src="../img/d.jpg" width="300">',
            "show":false
        };
        options[5]={
            "lat":35.517095,
            "lon":138.751779,
            "title":"河口湖",
            "pinColor":"",
            "height":300,
            "width":320,
            "description": 'Ginkakuji<br><img src="../img/k.jpg" width="300">',
            "show":false
        };
        options[6]={
            "lat":1,
            "lon":1,
            "title":"に友達が現在地を共有しました！",
            "pinColor":"",
            "height":300,
            "width":320,
            "description": 'Ginkakuji<br><img src="../img/aicon.jpg" width="300">',
            "show":false
            //友達に位置情報を送るボタンを押す。時間位置情報を取得し、サーバーに送る
            //
        };

        //----------------------------------------------------
        //4. Switch infoboxs
        //   infoboxLayers(options, true); //true=one, false=Multiple
        //----------------------------------------------------
        map.infoboxLayers(options,true);
    });
    //////////////あ
            //------------------------------------------------------------------------
        //1. Instance
        //------------------------------------------------------------------------
//        const map = new Bmap("#myMap");//あ
        //------------------------------------------------------------------------
        //2. Display Map
        //------------------------------------------------------------------------
//        map.startMap(35.039500, 135.728500, "load", 10);

        //----------------------------------------------------
        //3. Infobox
        //   options = new Array();
        //   options[index] = { lat, lon, width, height, title, pinColor, description, show };
        //----------------------------------------------------

}

</script>
</body>
</html>
